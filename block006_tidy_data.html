<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Tidy data</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45631879-2', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 66px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 71px;
  margin-top: -71px;
}

.section h2 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h3 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h4 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h5 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h6 {
  padding-top: 71px;
  margin-top: -71px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Computing for the Social Sciences</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="faq.html">FAQ</a>
</li>
<li>
  <a href="syllabus.html">Syllabus</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Tidy data</h1>

</div>


<div id="objectives" class="section level1">
<h1>Objectives</h1>
<ul>
<li>Define tidy data and its characteristics</li>
<li>Practice tidying data</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
</div>
<div id="tidy-data" class="section level1">
<h1>Tidy data</h1>
<p><strong>Tidy data</strong> is a specific way of organizing data into a consistent format which plugs into the <code>tidyverse</code> set of packages for R. It is not the only way to store data and there are reasons why you might not store data in this format, but eventually you will probably need to convert your data to a tidy format in order to efficiently analyze it.</p>
<p>There are three rules which make a dataset tidy:</p>
<ol style="list-style-type: decimal">
<li>Each variable must have its own column.</li>
<li>Each observation must have its own row.</li>
<li>Each value must have its own cell.</li>
</ol>
<div class="figure">
<img src="http://r4ds.had.co.nz/images/tidy-1.png" alt="Figure 12.1 from R for Data Science" />
<p class="caption">Figure 12.1 from <a href="r4ds.had.co.nz"><em>R for Data Science</em></a></p>
</div>
</div>
<div id="most-common-tasks-for-tidying-data" class="section level1">
<h1>Most common tasks for tidying data</h1>
<p>Let’s review the different tasks for tidying data using the R for Data Science <code>gapminder</code> subset. This is the data in a tidy format:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table1</code></pre></div>
<pre><code>## # A tibble: 6 × 4
##       country  year  cases population
##         &lt;chr&gt; &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3      Brazil  1999  37737  172006362
## 4      Brazil  2000  80488  174504898
## 5       China  1999 212258 1272915272
## 6       China  2000 213766 1280428583</code></pre>
<p>Note that in this data frame, each variable is in its own column (<code>country</code>, <code>year</code>, <code>cases</code>, and <code>population</code>), each observation is in its own row (i.e. each row is a different country-year pairing), and each value has its own cell.</p>
<div id="gathering" class="section level2">
<h2>Gathering</h2>
<p><strong>Gathering</strong> entails bringing a variable spread across multiple columns into a single column. For example, this version of <code>table1</code> is not tidy because the <code>year</code> variable is spread across multiple columns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table4a</code></pre></div>
<pre><code>## # A tibble: 3 × 3
##       country `1999` `2000`
## *       &lt;chr&gt;  &lt;int&gt;  &lt;int&gt;
## 1 Afghanistan    745   2666
## 2      Brazil  37737  80488
## 3       China 212258 213766</code></pre>
<p>We can use the <code>gather()</code> function from the <code>tidyr</code> package to reshape the data frame and make this tidy. To do this we need three pieces of information:</p>
<ol style="list-style-type: decimal">
<li>The names of the columns that represent the values, not variables. Here, those are <code>1999</code> and <code>2000</code>.</li>
<li>The <code>key</code>, or the name of the variable whose values form the column names. Here that is <code>year</code>.</li>
<li>The <code>value</code>, or the name of the variable whose values are spread over the cells. Here that is <code>cases</code>.</li>
</ol>
<blockquote>
<p>Notice that we create the names for <code>key</code> and <code>value</code> - they do not already exist in the data frame.</p>
</blockquote>
<p>We implement this using the <code>gather()</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table4a %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="st">`</span><span class="dt">1999</span><span class="st">`</span>, <span class="st">`</span><span class="dt">2000</span><span class="st">`</span>, <span class="dt">key =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;cases&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 6 × 3
##       country  year  cases
##         &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;
## 1 Afghanistan  1999    745
## 2      Brazil  1999  37737
## 3       China  1999 212258
## 4 Afghanistan  2000   2666
## 5      Brazil  2000  80488
## 6       China  2000 213766</code></pre>
<blockquote>
<p>In Stata and other statistics software, this operation would be called reshaping data wide to long.</p>
</blockquote>
</div>
<div id="spreading" class="section level2">
<h2>Spreading</h2>
<p><strong>Spreading</strong> brings an observation spread across multiple rows into a single row. It is the reverse of gathering. For instance, take <code>table2</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table2</code></pre></div>
<pre><code>## # A tibble: 12 × 4
##        country  year       type      count
##          &lt;chr&gt; &lt;int&gt;      &lt;chr&gt;      &lt;int&gt;
## 1  Afghanistan  1999      cases        745
## 2  Afghanistan  1999 population   19987071
## 3  Afghanistan  2000      cases       2666
## 4  Afghanistan  2000 population   20595360
## 5       Brazil  1999      cases      37737
## 6       Brazil  1999 population  172006362
## 7       Brazil  2000      cases      80488
## 8       Brazil  2000 population  174504898
## 9        China  1999      cases     212258
## 10       China  1999 population 1272915272
## 11       China  2000      cases     213766
## 12       China  2000 population 1280428583</code></pre>
<p>It violates the tidy data principle because each observation (unit of analysis is a country-year pairing) is split across multiple rows. To tidy the data frame, we need to know:</p>
<ol style="list-style-type: decimal">
<li>The <code>key</code> column, or the column that contains variable names. Here, it is <code>type</code>.</li>
<li>The <code>value</code> column, or the column that contains values for multiple variables. Here it is <code>count</code>.</li>
</ol>
<blockquote>
<p>Notice that unlike for gathering, when spreading the <code>key</code> and <code>value</code> columns are already defined in the data frame. We do not create the names ourselves, only identify them in the existing data frame.</p>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table2 %&gt;%
<span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> type, <span class="dt">value =</span> count)</code></pre></div>
<pre><code>## # A tibble: 6 × 4
##       country  year  cases population
## *       &lt;chr&gt; &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3      Brazil  1999  37737  172006362
## 4      Brazil  2000  80488  174504898
## 5       China  1999 212258 1272915272
## 6       China  2000 213766 1280428583</code></pre>
<blockquote>
<p>In Stata and other statistics software, this operation would be called reshaping data long to wide.</p>
</blockquote>
</div>
<div id="separating" class="section level2">
<h2>Separating</h2>
<p><strong>Separating</strong> splits multiple variables stored in a single column into multiple columns. For example in <code>table3</code>, the <code>rate</code> column contains both <code>cases</code> and <code>population</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table3</code></pre></div>
<pre><code>## # A tibble: 6 × 3
##       country  year              rate
## *       &lt;chr&gt; &lt;int&gt;             &lt;chr&gt;
## 1 Afghanistan  1999      745/19987071
## 2 Afghanistan  2000     2666/20595360
## 3      Brazil  1999   37737/172006362
## 4      Brazil  2000   80488/174504898
## 5       China  1999 212258/1272915272
## 6       China  2000 213766/1280428583</code></pre>
<p><strong>This is a no-no</strong>. Tidy data principles require each column to contain a single variable. We can use the <code>separate()</code> function to split the column into two new columns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table3 %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(rate, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 6 × 4
##       country  year  cases population
## *       &lt;chr&gt; &lt;int&gt;  &lt;chr&gt;      &lt;chr&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3      Brazil  1999  37737  172006362
## 4      Brazil  2000  80488  174504898
## 5       China  1999 212258 1272915272
## 6       China  2000 213766 1280428583</code></pre>
</div>
<div id="uniting" class="section level2">
<h2>Uniting</h2>
<p><strong>Uniting</strong> is the inverse of separating - when a variable is stored in multiple columns, uniting brings the variable back into a single column. <code>table5</code> splits the year variable into two columns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table5</code></pre></div>
<pre><code>## # A tibble: 6 × 4
##       country century  year              rate
## *       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt;
## 1 Afghanistan      19    99      745/19987071
## 2 Afghanistan      20    00     2666/20595360
## 3      Brazil      19    99   37737/172006362
## 4      Brazil      20    00   80488/174504898
## 5       China      19    99 212258/1272915272
## 6       China      20    00 213766/1280428583</code></pre>
<p>To bring them back together, use the <code>unite()</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table5 %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">unite</span>(new, century, year)</code></pre></div>
<pre><code>## # A tibble: 6 × 3
##       country   new              rate
## *       &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt;
## 1 Afghanistan 19_99      745/19987071
## 2 Afghanistan 20_00     2666/20595360
## 3      Brazil 19_99   37737/172006362
## 4      Brazil 20_00   80488/174504898
## 5       China 19_99 212258/1272915272
## 6       China 20_00 213766/1280428583</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># remove underscore</span>
table5 %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">unite</span>(new, century, year, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 6 × 3
##       country   new              rate
## *       &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt;
## 1 Afghanistan  1999      745/19987071
## 2 Afghanistan  2000     2666/20595360
## 3      Brazil  1999   37737/172006362
## 4      Brazil  2000   80488/174504898
## 5       China  1999 212258/1272915272
## 6       China  2000 213766/1280428583</code></pre>
</div>
</div>
<div id="practice-tidying-data" class="section level1">
<h1>Practice tidying data</h1>
<blockquote>
<p>Before you begin the exercises, update your <code>rcfss</code> library by running <code>devtools::install_github(&quot;uc-cfss/rcfss&quot;)</code> in the console.</p>
</blockquote>
<p>For each exercise, tidy the data frame. Before you write any code examine the structure of the data frame and mentally (or with pen-and-paper) sketch out what you think the tidy data structure should be.</p>
<div id="race-data" class="section level2">
<h2>Race data</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rcfss)
race</code></pre></div>
<pre><code>## # A tibble: 4 × 8
##     Name  `50` `100` `150` `200` `250` `300` `350`
##   &lt;fctr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  Carla   1.2   1.8   2.2   2.3   3.0   2.5   1.8
## 2   Mace   1.5   1.1   1.9   2.0   3.6   3.0   2.5
## 3    Lea   1.7   1.6   2.3   2.7   2.6   2.2   2.6
## 4  Karen   1.3   1.7   1.9   2.2   3.2   1.5   1.9</code></pre>
<p>Important info:</p>
<ul>
<li><code>Name</code> - pretty obvious</li>
<li><code>50</code>:<code>350</code> - column names define different lengths of time</li>
<li>Cell values are scores associated with each name and length of time</li>
</ul>
<details> <summary>Click for a hint</summary>
<p>
<p><strong>Tidy data structure</strong></p>
<pre><code>## # A tibble: 28 × 3
##      Name  Time Score
##    &lt;fctr&gt; &lt;int&gt; &lt;dbl&gt;
## 1   Carla    50   1.2
## 2   Carla   100   1.8
## 3   Carla   150   2.2
## 4   Carla   200   2.3
## 5   Carla   250   3.0
## 6   Carla   300   2.5
## 7   Carla   350   1.8
## 8   Karen    50   1.3
## 9   Karen   100   1.7
## 10  Karen   150   1.9
## # ... with 18 more rows</code></pre>
</p>
<p></details></p>
<details> <summary>Click for the solution</summary>
<p>
<p>This is essentially a gathering operation. Except for the <code>Name</code> column, the remaining columns are actually one variable spread across multiple columns. The column names are a distinct variable, and the columns’ values are another variable. We want to gather these columns. The <code>key</code> will tell us the original column name, and the <code>value</code> will give us the values in the cells. Because the column names are actually numeric values, we set <code>convert = TRUE</code> to coerce the new <code>Time</code> column into a numeric column (or vector). (The last line isn’t necessary, but sorts the data frame in a consistent manner.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">race %&gt;%
<span class="st">  </span><span class="kw">gather</span>(Time, Score, -Name, <span class="dt">convert =</span> <span class="ot">TRUE</span>) %&gt;%
<span class="st">  </span><span class="kw">arrange</span>(Name, Time)</code></pre></div>
<pre><code>## # A tibble: 28 × 3
##      Name  Time Score
##    &lt;fctr&gt; &lt;int&gt; &lt;dbl&gt;
## 1   Carla    50   1.2
## 2   Carla   100   1.8
## 3   Carla   150   2.2
## 4   Carla   200   2.3
## 5   Carla   250   3.0
## 6   Carla   300   2.5
## 7   Carla   350   1.8
## 8   Karen    50   1.3
## 9   Karen   100   1.7
## 10  Karen   150   1.9
## # ... with 18 more rows</code></pre>
</p>
<p></details></p>
</div>
<div id="clinical-trials" class="section level2">
<h2>Clinical trials</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">results</code></pre></div>
<pre><code>## # A tibble: 20 × 3
##      Ind Treatment value
##    &lt;chr&gt;     &lt;chr&gt; &lt;int&gt;
## 1   Ind1     Treat     1
## 2   Ind2     Treat     2
## 3   Ind3     Treat     3
## 4   Ind4     Treat     4
## 5   Ind5     Treat     5
## 6   Ind6     Treat     6
## 7   Ind7     Treat     7
## 8   Ind8     Treat     8
## 9   Ind9     Treat     9
## 10 Ind10     Treat    10
## 11  Ind1      Cont    11
## 12  Ind2      Cont    12
## 13  Ind3      Cont    13
## 14  Ind4      Cont    14
## 15  Ind5      Cont    15
## 16  Ind6      Cont    16
## 17  Ind7      Cont    17
## 18  Ind8      Cont    18
## 19  Ind9      Cont    19
## 20 Ind10      Cont    20</code></pre>
<details> <summary>Click for a hint</summary>
<p>
<p><strong>Tidy data structure</strong></p>
<pre><code>## # A tibble: 10 × 3
##      Ind  Cont Treat
## *  &lt;chr&gt; &lt;int&gt; &lt;int&gt;
## 1   Ind1    11     1
## 2  Ind10    20    10
## 3   Ind2    12     2
## 4   Ind3    13     3
## 5   Ind4    14     4
## 6   Ind5    15     5
## 7   Ind6    16     6
## 8   Ind7    17     7
## 9   Ind8    18     8
## 10  Ind9    19     9</code></pre>
</p>
<p></details></p>
<details> <summary>Click for the solution</summary>
<p>
<p>This dataset is not tidy because observations are spread across multiple rows. There only needs to be one row for each individual. Then <code>Treat</code> and <code>Cont</code> can be stored in separate columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">results %&gt;%
<span class="st">  </span><span class="kw">spread</span>(Treatment, value)</code></pre></div>
<pre><code>## # A tibble: 10 × 3
##      Ind  Cont Treat
## *  &lt;chr&gt; &lt;int&gt; &lt;int&gt;
## 1   Ind1    11     1
## 2  Ind10    20    10
## 3   Ind2    12     2
## 4   Ind3    13     3
## 5   Ind4    14     4
## 6   Ind5    15     5
## 7   Ind6    16     6
## 8   Ind7    17     7
## 9   Ind8    18     8
## 10  Ind9    19     9</code></pre>
</p>
<p></details></p>
</div>
<div id="grades" class="section level2">
<h2>Grades</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grades</code></pre></div>
<pre><code>## # A tibble: 12 × 6
##       ID  Test  Year  Fall Spring Winter
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
## 1      1     1  2008    15     16     19
## 2      1     1  2009    12     13     27
## 3      1     2  2008    22     22     24
## 4      1     2  2009    10     14     20
## 5      2     1  2008    12     13     25
## 6      2     1  2009    16     14     21
## 7      2     2  2008    13     11     29
## 8      2     2  2009    23     20     26
## 9      3     1  2008    11     12     22
## 10     3     1  2009    13     11     27
## 11     3     2  2008    17     12     23
## 12     3     2  2009    14      9     31</code></pre>
<p>This one is a bit tougher. Important info:</p>
<ul>
<li><strong>The unit of analysis is ID-Year-Quarter.</strong> That is, in the tidy formulation each observation represents one individual during one quarter in a given year.</li>
<li><strong>Each test is unique.</strong> As in they should be treated as two separate variables.</li>
</ul>
<details> <summary>Click for a hint</summary>
<p>
<p><strong>Tidy data structure</strong></p>
<pre><code>## # A tibble: 18 × 5
##       ID  Year Quarter Test1 Test2
##    &lt;int&gt; &lt;int&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt;
## 1      1  2008    Fall    15    22
## 2      1  2008  Spring    16    22
## 3      1  2008  Winter    19    24
## 4      1  2009    Fall    12    10
## 5      1  2009  Spring    13    14
## 6      1  2009  Winter    27    20
## 7      2  2008    Fall    12    13
## 8      2  2008  Spring    13    11
## 9      2  2008  Winter    25    29
## 10     2  2009    Fall    16    23
## 11     2  2009  Spring    14    20
## 12     2  2009  Winter    21    26
## 13     3  2008    Fall    11    17
## 14     3  2008  Spring    12    12
## 15     3  2008  Winter    22    23
## 16     3  2009    Fall    13    14
## 17     3  2009  Spring    11     9
## 18     3  2009  Winter    27    31</code></pre>
</p>
<p></details></p>
<details> <summary>Click for the solution</summary>
<p>
<p>In this example, the basic unit of observation is the test. Each individual takes two separate tests (labeled <code>1</code> and <code>2</code>) at multiple points in time: during each quarter (<code>Fall</code>, <code>Winter</code>, <code>Spring</code>) as well as in multiple years (<code>2008</code> and <code>2009</code>). So our final data frame should contain five columns: <code>ID</code> (identifying the student), <code>Year</code> (year the test was taken), <code>Quarter</code> (quarter in which the test was taken), <code>Test1</code> (score on the first test), and <code>Test2</code> (score on the second test).</p>
<p>Let’s start with the gathering operation: we want to gather <code>Fall</code>, <code>Winter</code>, and <code>Spring</code> into a single column (we can use the inclusive select function <code>:</code> to gather these three columns):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grades %&gt;%
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key =</span> Quarter, <span class="dt">value =</span> Score, Fall:Winter)</code></pre></div>
<pre><code>## # A tibble: 36 × 5
##       ID  Test  Year Quarter Score
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;chr&gt; &lt;int&gt;
## 1      1     1  2008    Fall    15
## 2      1     1  2009    Fall    12
## 3      1     2  2008    Fall    22
## 4      1     2  2009    Fall    10
## 5      2     1  2008    Fall    12
## 6      2     1  2009    Fall    16
## 7      2     2  2008    Fall    13
## 8      2     2  2009    Fall    23
## 9      3     1  2008    Fall    11
## 10     3     1  2009    Fall    13
## # ... with 26 more rows</code></pre>
<p>Good, but now we spread observations across multiple rows. Remember that we want each test to be a separate variable. To do that, we can spread those values across two columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grades %&gt;%
<span class="st">  </span><span class="kw">gather</span>(Quarter, Score, Fall:Winter) %&gt;%
<span class="st">  </span><span class="kw">spread</span>(Test, Score)</code></pre></div>
<pre><code>## # A tibble: 18 × 5
##       ID  Year Quarter   `1`   `2`
## *  &lt;int&gt; &lt;int&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt;
## 1      1  2008    Fall    15    22
## 2      1  2008  Spring    16    22
## 3      1  2008  Winter    19    24
## 4      1  2009    Fall    12    10
## 5      1  2009  Spring    13    14
## 6      1  2009  Winter    27    20
## 7      2  2008    Fall    12    13
## 8      2  2008  Spring    13    11
## 9      2  2008  Winter    25    29
## 10     2  2009    Fall    16    23
## 11     2  2009  Spring    14    20
## 12     2  2009  Winter    21    26
## 13     3  2008    Fall    11    17
## 14     3  2008  Spring    12    12
## 15     3  2008  Winter    22    23
## 16     3  2009    Fall    13    14
## 17     3  2009  Spring    11     9
## 18     3  2009  Winter    27    31</code></pre>
<p>This is an acceptable solution, but look what happened to the column names for each test: they’re labeled as numbers (<code>1</code> and <code>2</code>). We’d rather give columns text labels, since those are easier to reference in our code. We can use a function called <code>str_c()</code> from the <code>stringr</code> library to add text to the <code>Test</code> column before we spread it. <code>str_c()</code> combines two or more values together to create a single value:<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)

grades %&gt;%
<span class="st">  </span><span class="kw">gather</span>(Quarter, Score, Fall:Winter) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Test =</span> <span class="kw">str_c</span>(<span class="st">&quot;Test&quot;</span>, Test))</code></pre></div>
<pre><code>## # A tibble: 36 × 5
##       ID  Test  Year Quarter Score
##    &lt;int&gt; &lt;chr&gt; &lt;int&gt;   &lt;chr&gt; &lt;int&gt;
## 1      1 Test1  2008    Fall    15
## 2      1 Test1  2009    Fall    12
## 3      1 Test2  2008    Fall    22
## 4      1 Test2  2009    Fall    10
## 5      2 Test1  2008    Fall    12
## 6      2 Test1  2009    Fall    16
## 7      2 Test2  2008    Fall    13
## 8      2 Test2  2009    Fall    23
## 9      3 Test1  2008    Fall    11
## 10     3 Test1  2009    Fall    13
## # ... with 26 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grades %&gt;%
<span class="st">  </span><span class="kw">gather</span>(Quarter, Score, Fall:Winter) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Test =</span> <span class="kw">str_c</span>(<span class="st">&quot;Test&quot;</span>, Test)) %&gt;%
<span class="st">  </span><span class="kw">spread</span>(Test, Score)</code></pre></div>
<pre><code>## # A tibble: 18 × 5
##       ID  Year Quarter Test1 Test2
## *  &lt;int&gt; &lt;int&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt;
## 1      1  2008    Fall    15    22
## 2      1  2008  Spring    16    22
## 3      1  2008  Winter    19    24
## 4      1  2009    Fall    12    10
## 5      1  2009  Spring    13    14
## 6      1  2009  Winter    27    20
## 7      2  2008    Fall    12    13
## 8      2  2008  Spring    13    11
## 9      2  2008  Winter    25    29
## 10     2  2009    Fall    16    23
## 11     2  2009  Spring    14    20
## 12     2  2009  Winter    21    26
## 13     3  2008    Fall    11    17
## 14     3  2008  Spring    12    12
## 15     3  2008  Winter    22    23
## 16     3  2009    Fall    13    14
## 17     3  2009  Spring    11     9
## 18     3  2009  Winter    27    31</code></pre>
<p>If we’re cleaning up the data frame, let’s also arrange it in a logical order:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grades %&gt;%
<span class="st">  </span><span class="kw">gather</span>(Quarter, Score, Fall:Winter) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Test =</span> <span class="kw">str_c</span>(<span class="st">&quot;Test&quot;</span>, Test)) %&gt;%
<span class="st">  </span><span class="kw">spread</span>(Test, Score) %&gt;%
<span class="st">  </span><span class="kw">arrange</span>(ID, Year, Quarter)</code></pre></div>
<pre><code>## # A tibble: 18 × 5
##       ID  Year Quarter Test1 Test2
##    &lt;int&gt; &lt;int&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt;
## 1      1  2008    Fall    15    22
## 2      1  2008  Spring    16    22
## 3      1  2008  Winter    19    24
## 4      1  2009    Fall    12    10
## 5      1  2009  Spring    13    14
## 6      1  2009  Winter    27    20
## 7      2  2008    Fall    12    13
## 8      2  2008  Spring    13    11
## 9      2  2008  Winter    25    29
## 10     2  2009    Fall    16    23
## 11     2  2009  Spring    14    20
## 12     2  2009  Winter    21    26
## 13     3  2008    Fall    11    17
## 14     3  2008  Spring    12    12
## 15     3  2008  Winter    22    23
## 16     3  2009    Fall    13    14
## 17     3  2009  Spring    11     9
## 18     3  2009  Winter    27    31</code></pre>
</p>
<p></details></p>
</div>
</div>
<div id="session-info" class="section level1 toc-ignore">
<h1>Session Info</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">session_info</span>()</code></pre></div>
<pre><code>## Session info -------------------------------------------------------------</code></pre>
<pre><code>##  setting  value                       
##  version  R version 3.3.3 (2017-03-06)
##  system   x86_64, darwin13.4.0        
##  ui       RStudio (1.0.136)           
##  language (EN)                        
##  collate  en_US.UTF-8                 
##  tz       America/Chicago             
##  date     2017-05-30</code></pre>
<pre><code>## Packages -----------------------------------------------------------------</code></pre>
<pre><code>##  package        * version    date       source                            
##  animation        2.5        2017-03-30 CRAN (R 3.3.2)                    
##  assertthat       0.2.0      2017-04-11 cran (@0.2.0)                     
##  backports        1.1.0      2017-05-22 CRAN (R 3.3.2)                    
##  base           * 3.3.3      2017-03-07 local                             
##  base64enc        0.1-3      2015-07-28 CRAN (R 3.3.0)                    
##  bigrquery      * 0.3.0      2016-06-28 CRAN (R 3.3.0)                    
##  bitops           1.0-6      2013-08-17 CRAN (R 3.3.0)                    
##  boot           * 1.3-19     2017-04-21 CRAN (R 3.3.2)                    
##  broom          * 0.4.2      2017-02-13 CRAN (R 3.3.2)                    
##  car              2.1-4      2016-12-02 CRAN (R 3.3.2)                    
##  caret          * 6.0-76     2017-04-18 CRAN (R 3.3.2)                    
##  cellranger       1.1.0      2016-07-27 CRAN (R 3.3.0)                    
##  class            7.3-14     2015-08-30 CRAN (R 3.3.3)                    
##  codetools        0.2-15     2016-10-05 CRAN (R 3.3.3)                    
##  colorspace       1.3-2      2016-12-14 CRAN (R 3.3.2)                    
##  curl           * 2.6        2017-04-27 CRAN (R 3.3.2)                    
##  datasets       * 3.3.3      2017-03-07 local                             
##  DBI              0.6-1      2017-04-01 CRAN (R 3.3.2)                    
##  devtools         1.13.1     2017-05-13 CRAN (R 3.3.2)                    
##  digest           0.6.12     2017-01-27 CRAN (R 3.3.2)                    
##  dplyr          * 0.5.0      2016-06-24 CRAN (R 3.3.0)                    
##  e1071          * 1.6-8      2017-02-02 CRAN (R 3.3.2)                    
##  evaluate         0.10       2016-10-11 CRAN (R 3.3.0)                    
##  FNN            * 1.1        2013-07-31 CRAN (R 3.3.0)                    
##  forcats        * 0.2.0      2017-01-23 CRAN (R 3.3.2)                    
##  foreach        * 1.4.3      2015-10-13 CRAN (R 3.3.0)                    
##  foreign          0.8-68     2017-04-24 CRAN (R 3.3.2)                    
##  gam            * 1.14-4     2017-04-25 CRAN (R 3.3.2)                    
##  gapminder      * 0.2.0      2015-12-31 CRAN (R 3.3.0)                    
##  gbm            * 2.1.3      2017-03-21 CRAN (R 3.3.2)                    
##  geosphere        1.5-5      2016-06-15 CRAN (R 3.3.0)                    
##  gganimate      * 0.1.0.9000 2017-05-26 Github (dgrtwo/gganimate@bf82002) 
##  ggmap          * 2.7        2016-12-07 Github (dkahle/ggmap@c6b7579)     
##  ggplot2        * 2.2.1.9000 2017-05-12 Github (tidyverse/ggplot2@f4398b6)
##  ggrepel        * 0.6.5      2016-11-24 CRAN (R 3.3.2)                    
##  ggstance       * 0.3        2016-11-16 CRAN (R 3.3.2)                    
##  graphics       * 3.3.3      2017-03-07 local                             
##  grDevices      * 3.3.3      2017-03-07 local                             
##  grid             3.3.3      2017-03-07 local                             
##  gridExtra      * 2.2.1      2016-02-29 cran (@2.2.1)                     
##  gtable           0.2.0      2016-02-26 CRAN (R 3.3.0)                    
##  haven          * 1.0.0      2016-09-23 cran (@1.0.0)                     
##  here           * 0.0-6      2017-02-04 Github (krlmlr/here@007bfd9)      
##  hexbin         * 1.27.1     2015-08-19 CRAN (R 3.3.0)                    
##  highr            0.6        2016-05-09 CRAN (R 3.3.0)                    
##  hms              0.3        2016-11-22 CRAN (R 3.3.2)                    
##  htmltools        0.3.6      2017-04-28 cran (@0.3.6)                     
##  htmlwidgets      0.8        2016-11-09 CRAN (R 3.3.1)                    
##  httpuv           1.3.3      2015-08-04 CRAN (R 3.3.0)                    
##  httr           * 1.2.1      2016-07-03 CRAN (R 3.3.0)                    
##  igraph           1.0.1      2015-06-26 CRAN (R 3.3.0)                    
##  ISLR           * 1.0        2013-06-11 CRAN (R 3.3.0)                    
##  iterators        1.0.8      2015-10-13 CRAN (R 3.3.0)                    
##  janeaustenr      0.1.4      2016-10-26 CRAN (R 3.3.0)                    
##  jpeg             0.1-8      2014-01-23 cran (@0.1-8)                     
##  jsonlite       * 1.4        2017-04-08 cran (@1.4)                       
##  kknn           * 1.3.1      2016-03-26 CRAN (R 3.3.0)                    
##  knitr          * 1.16       2017-05-18 CRAN (R 3.3.2)                    
##  labeling         0.3        2014-08-23 CRAN (R 3.3.0)                    
##  lattice        * 0.20-35    2017-03-25 CRAN (R 3.3.2)                    
##  lazyeval         0.2.0      2016-06-12 CRAN (R 3.3.0)                    
##  lme4             1.1-13     2017-04-19 cran (@1.1-13)                    
##  lubridate      * 1.6.0      2016-09-13 CRAN (R 3.3.0)                    
##  lvplot         * 0.2.0.9000 2017-01-06 Github (hadley/lvplot@8ce61c7)    
##  magrittr         1.5        2014-11-22 CRAN (R 3.3.0)                    
##  mapproj          1.2-4      2015-08-03 CRAN (R 3.3.0)                    
##  maps           * 3.1.1      2016-07-27 CRAN (R 3.3.0)                    
##  MASS             7.3-47     2017-04-21 CRAN (R 3.3.2)                    
##  Matrix           1.2-10     2017-04-28 CRAN (R 3.3.2)                    
##  MatrixModels   * 0.4-1      2015-08-22 CRAN (R 3.3.0)                    
##  memoise          1.1.0      2017-04-21 CRAN (R 3.3.2)                    
##  methods        * 3.3.3      2017-03-07 local                             
##  mgcv             1.8-17     2017-02-08 CRAN (R 3.3.3)                    
##  microbenchmark * 1.4-2.1    2015-11-25 CRAN (R 3.3.0)                    
##  mime             0.5        2016-07-07 CRAN (R 3.3.0)                    
##  minqa            1.2.4      2014-10-09 cran (@1.2.4)                     
##  mnormt           1.5-5      2016-10-15 CRAN (R 3.3.0)                    
##  ModelMetrics     1.1.0      2016-08-26 CRAN (R 3.3.0)                    
##  modelr         * 0.1.0      2016-08-31 CRAN (R 3.3.0)                    
##  modeltools       0.2-21     2013-09-02 CRAN (R 3.3.0)                    
##  munsell          0.4.3      2016-02-13 CRAN (R 3.3.0)                    
##  nlme             3.1-131    2017-02-06 CRAN (R 3.3.3)                    
##  nloptr           1.0.4      2014-08-04 cran (@1.0.4)                     
##  NLP              0.1-10     2017-02-21 CRAN (R 3.3.2)                    
##  nnet           * 7.3-12     2016-02-02 CRAN (R 3.3.3)                    
##  nycflights13   * 0.2.2      2017-01-27 CRAN (R 3.3.2)                    
##  parallel       * 3.3.3      2017-03-07 local                             
##  pbkrtest         0.4-7      2017-03-15 CRAN (R 3.3.2)                    
##  plyr             1.8.4      2016-06-08 CRAN (R 3.3.0)                    
##  png              0.1-7      2013-12-03 cran (@0.1-7)                     
##  pROC           * 1.9.1      2017-02-05 CRAN (R 3.3.2)                    
##  profvis        * 0.3.3      2017-01-14 CRAN (R 3.3.2)                    
##  proto            1.0.0      2016-10-29 CRAN (R 3.3.0)                    
##  psych            1.7.5      2017-05-03 CRAN (R 3.3.3)                    
##  purrr          * 0.2.2.2    2017-05-11 CRAN (R 3.3.3)                    
##  quantreg       * 5.33       2017-04-18 CRAN (R 3.3.2)                    
##  R6               2.2.1      2017-05-10 CRAN (R 3.3.2)                    
##  randomForest   * 4.6-12     2015-10-07 CRAN (R 3.3.0)                    
##  rcfss          * 0.1.4      2017-02-28 local                             
##  Rcpp             0.12.11    2017-05-22 CRAN (R 3.3.2)                    
##  readr          * 1.1.1      2017-05-16 CRAN (R 3.3.2)                    
##  readxl         * 1.0.0      2017-04-18 CRAN (R 3.3.2)                    
##  rebird         * 0.4.0      2017-04-26 CRAN (R 3.3.2)                    
##  reshape2         1.4.2      2016-10-22 CRAN (R 3.3.0)                    
##  RgoogleMaps      1.4.1      2016-09-18 cran (@1.4.1)                     
##  rjson            0.2.15     2014-11-03 cran (@0.2.15)                    
##  rlang            0.1.9000   2017-05-12 Github (hadley/rlang@c17568e)     
##  rmarkdown        1.5        2017-04-26 CRAN (R 3.3.2)                    
##  rprojroot        1.2        2017-01-16 CRAN (R 3.3.2)                    
##  rsconnect        0.8        2017-05-08 CRAN (R 3.3.2)                    
##  RSQLite        * 1.1-2      2017-01-08 CRAN (R 3.3.2)                    
##  rstudioapi       0.6        2016-06-27 CRAN (R 3.3.0)                    
##  rvest          * 0.3.2      2016-06-17 CRAN (R 3.3.0)                    
##  scales         * 0.4.1      2016-11-09 CRAN (R 3.3.1)                    
##  shiny          * 1.0.3      2017-04-26 CRAN (R 3.3.2)                    
##  slam             0.1-40     2016-12-01 CRAN (R 3.3.2)                    
##  SnowballC        0.5.1      2014-08-09 cran (@0.5.1)                     
##  sp               1.2-4      2016-12-22 CRAN (R 3.3.2)                    
##  sparklyr       * 0.5.5      2017-05-26 CRAN (R 3.3.3)                    
##  SparseM        * 1.77       2017-04-23 CRAN (R 3.3.2)                    
##  splines        * 3.3.3      2017-03-07 local                             
##  stats          * 3.3.3      2017-03-07 local                             
##  stats4           3.3.3      2017-03-07 local                             
##  stringi          1.1.5      2017-04-07 CRAN (R 3.3.2)                    
##  stringr        * 1.2.0      2017-02-18 CRAN (R 3.3.2)                    
##  survival       * 2.41-3     2017-04-04 CRAN (R 3.3.2)                    
##  tibble         * 1.3.1      2017-05-17 CRAN (R 3.3.2)                    
##  tidyr          * 0.6.3      2017-05-15 CRAN (R 3.3.2)                    
##  tidytext       * 0.1.2      2016-10-28 CRAN (R 3.3.0)                    
##  tidyverse      * 1.1.1      2017-01-27 CRAN (R 3.3.2)                    
##  titanic        * 0.1.0      2015-08-31 CRAN (R 3.3.0)                    
##  tm               0.7-1      2017-03-02 CRAN (R 3.3.2)                    
##  tokenizers       0.1.4      2016-08-29 CRAN (R 3.3.0)                    
##  tools            3.3.3      2017-03-07 local                             
##  topicmodels    * 0.2-6      2017-04-18 CRAN (R 3.3.2)                    
##  tree           * 1.0-37     2016-01-21 CRAN (R 3.3.0)                    
##  tweenr         * 0.1.5      2016-10-10 CRAN (R 3.3.0)                    
##  utils          * 3.3.3      2017-03-07 local                             
##  withr            1.0.2      2016-06-20 CRAN (R 3.3.0)                    
##  XML            * 3.98-1.7   2017-05-03 CRAN (R 3.3.2)                    
##  xml2           * 1.1.1      2017-01-24 CRAN (R 3.3.2)                    
##  xtable           1.8-2      2016-02-05 CRAN (R 3.3.0)                    
##  yaml             2.1.14     2016-11-12 cran (@2.1.14)</code></pre>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>You might think to use the <code>unite()</code> function here, but it won’t work unless you first create a column which only contains the value <code>Test</code>, like so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grades %&gt;%
<span class="st">  </span><span class="kw">gather</span>(Quarter, Score, Fall:Winter) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">test_label =</span> <span class="st">&quot;Test&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">unite</span>(<span class="dt">col =</span> Test, test_label, Test)</code></pre></div>
<pre><code>## # A tibble: 36 × 5
##       ID   Test  Year Quarter Score
## *  &lt;int&gt;  &lt;chr&gt; &lt;int&gt;   &lt;chr&gt; &lt;int&gt;
## 1      1 Test_1  2008    Fall    15
## 2      1 Test_1  2009    Fall    12
## 3      1 Test_2  2008    Fall    22
## 4      1 Test_2  2009    Fall    10
## 5      2 Test_1  2008    Fall    12
## 6      2 Test_1  2009    Fall    16
## 7      2 Test_2  2008    Fall    13
## 8      2 Test_2  2009    Fall    23
## 9      3 Test_1  2008    Fall    11
## 10     3 Test_1  2009    Fall    13
## # ... with 26 more rows</code></pre>
<p>This works, but requires two lines of code instead of one.<a href="#fnref1">↩</a></p></li>
</ol>
</div>

<p>This work is licensed under the  <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0 Creative Commons License</a>.</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
